var k=class{#e=new Map;#r=[];getQuerySelector(){let e="";for(let r of this.#r)e+=r+",";return e.endsWith(",")&&(e=e.slice(0,-1)),e}findHandlerFor(e){if(!e)throw new Error("Invalid elementType: cannot be null or undefined.");let r=e.constructor,s=this.#e.get(r);if(!s)return null;let u=s.filter(a=>a.handler.shouldProcess(e));return u.length===0?null:u[0].handler}addHandler(e,r,s,u=0){if(!e)throw new Error("Invalid elementType: cannot be null or undefined.");if(u<0)throw new Error("Invalid priority: it can not be less than zero.");if(!r)throw new Error("Invaild tagName: cannot be null or undefined.");if(!s)throw new Error("Invaild handler: cannot be null or undefined.");if(typeof s.shouldProcess!="function")throw new Error("Invaild handler: shouldProcess should be a function.");if(typeof s.process!="function")throw new Error("Invaild handler: process should be a function.");if(typeof s.JSONProcess!="function")throw new Error("Invaild handler: JSONProcess should be a function.");let a="check if its null or an unknown element";if(typeof e=="string"&&(e=document.createElement(e).constructor,a="try using the class name for the element instead of a string"),!this.#s(e))throw new Error("Invalid elementType: "+a);this.#e.has(e)||this.#e.set(e,[]);let d=this.#e.get(e);d.push({handler:s,priority:u,tagName:r}),d.sort((t,n)=>t.priority-n.priority),this.#e.set(e,d),this.#r.push(r)}#s(e){return!(e==null||e instanceof HTMLUnknownElement||typeof e!="function"||!HTMLElement.prototype.isPrototypeOf(e.prototype))}};var f=class{static shouldProcess(e){return e.type==="text"||e.type==="password"||e.type==="email"||e.type==="hidden"||e.type==="tel"||!e.type}static process(e){return{getText:()=>String(e.value),setText:r=>e.value=r,toBase64:()=>btoa(e.value),toBinary:()=>e.value.split("").map(r=>r.charCodeAt(0).toString(2).padStart(8,"0")).join(" "),clear:()=>e.value="",focus:()=>e.focus(),blur:()=>e.blur(),isEmpty:()=>e.value.trim()==="",enable:()=>e.disabled=!1,disable:()=>e.disabled=!0,setPlaceHolder:r=>e.placeholder=r,getPlaceHolder:()=>e.placeholder,appendText:r=>e.value+=r,prependText:r=>e.value=r+e.value,element:e,onInput:r=>e.addEventListener("input",s=>{r(s)}),onChange:r=>e.addEventListener("change",s=>{r(s)}),onEnter:r=>e.addEventListener("keydown",s=>{s.key==="Enter"&&r(s)})}}static JSONProcess(e){return String(e.value)}};var p=class{static shouldProcess(e){return e.type==="checkbox"}static process(e){return{disable:()=>e.disabled=!0,enable:()=>e.disabled=!1,focus:()=>e.focus(),blur:()=>e.blur(),isChecked:()=>e.checked,toggleChecked:()=>e.checked=!e.checked,setChecked:()=>e.checked=!0,setUnchecked:()=>e.checked=!1,onChange:r=>e.addEventListener("change",s=>{r(s)}),element:e}}static JSONProcess(e){return e.checked}};var b=class{static shouldProcess(e){return e.type==="color"}static process(e){return{disable:()=>e.disabled=!0,enable:()=>e.disabled=!1,focus:()=>e.focus(),blur:()=>e.blur(),getColor:()=>e.value,setColor:r=>r=e.value,toRGB:()=>{let r=parseInt(e.value.slice(1),16);return{r:r>>16&255,g:r>>8&255,b:r&255}},randomColor:()=>e.value="#"+Math.floor(Math.random()*16777215).toString(16).padStart(6,"0"),onChange:r=>e.addEventListener("change",s=>{r(s)}),onInput:r=>e.addEventListener("input",s=>{r(s)}),element:e}}static JSONProcess(e){return e.value}};var l=class{static shouldProcess(e){return e.type==="date"}static process(e){return{disable:()=>e.disabled=!0,enable:()=>e.disabled=!1,focus:()=>e.focus(),blur:()=>e.blur(),setDate:r=>e.value=r,getDate:()=>e.value,setMinimumDate:r=>e.min=r,getMinimumDate:()=>e.min,setMaximumDate:r=>e.max=r,setStep:r=>e.step=r,getStep:()=>e.step,toISO:()=>new Date(e.valueAsNumber).toISOString(),toUnix:()=>Math.floor(e.valueAsNumber/1e3),toHuman:()=>new Date(e.valueAsNumber).toString(),element:e}}static JSONProcess(e){if(!e.value)return"";let r;try{r=new Date(e.valueAsNumber).toISOString()}catch{return""}return r}};var y=class{static shouldProcess(e){return e.type==="datetime-local"}static process(e){return{disable:()=>e.disabled=!0,enable:()=>e.disabled=!1,focus:()=>e.focus(),blur:()=>e.blur(),setDateTime:r=>e.value=r,getDateTime:()=>e.value,setMinimumDateTime:r=>e.min=r,getMinimumDateTime:()=>e.min,setMaximumDateTime:r=>e.max=r,setStep:r=>e.step=r,getStep:()=>e.step,toISO:()=>new Date(e.valueAsNumber).toISOString(),toUnix:()=>Math.floor(e.valueAsNumber/1e3),toHuman:()=>new Date(e.valueAsNumber).toString(),element:e}}static JSONProcess(e){if(!e.value)return"";let r;try{r=new Date(e.valueAsNumber).toISOString()}catch{return""}return r}};var g=class{static shouldProcess(e){return e.type==="file"}static process(e){return{disable:()=>e.disabled=!0,enable:()=>e.disabled=!1,focus:()=>e.focus(),blur:()=>e.blur(),onChange:r=>e.addEventListener("change",s=>{r(s)}),hasFiles:()=>e.files.length>0,hasMultipleFiles:()=>e.files.length>=1,getFile:(r=0)=>e.files[r]}}static JSONProcess(e){if(!e.files||!e.files[0])return"";let r=[];return Array.from(e.files).forEach((s,u)=>{r.push({name:s.name,size:s.size,type:s.type,lastModified:s.lastModified})}),r}};var v=class{static shouldProcess(e){return e.type==="number"}static process(e){return{disable:()=>e.disabled=!0,enable:()=>e.disabled=!1,focus:()=>e.focus(),blur:()=>e.blur(),setNumber:r=>e.value=r,getNumber:()=>e.value,setMinimumNumber:r=>e.min=r,setMaximumNumber:r=>e.max=r,setStep:r=>e.step=r,getStep:()=>e.step,element:e}}static JSONProcess(e){return e.value?parseInt(e.value):""}};var x=class{static shouldProcess(e){return e.type==="radio"}static process(e){return{disable:()=>e.disabled=!0,enable:()=>e.disabled=!1,focus:()=>e.focus(),blur:()=>e.blur(),isChecked:()=>e.checked,toggleChecked:()=>e.checked=!e.checked,setChecked:()=>e.checked=!0,setUnchecked:()=>e.checked=!1,onChange:r=>e.addEventListener("change",s=>{r(s)}),element:e}}static customKey(e){return e.name}static JSONProcess(e){if(e.checked)return e.value}};var S=class{static shouldProcess(e){return e.type==="range"}static process(e){return{disable:()=>e.disabled=!0,enable:()=>e.disabled=!1,focus:()=>e.focus(),blur:()=>e.blur(),setNumber:r=>e.value=r,getNumber:()=>e.value,setMinimumNumber:r=>e.min=r,setMaximumNumber:r=>e.max=r,setStep:r=>e.step=r,getStep:()=>e.step,element:e}}static JSONProcess(e){return e.value?parseInt(e.value):""}};var H=class{static shouldProcess(e){return e.type==="time"}static process(e){return{disable:()=>e.disabled=!0,enable:()=>e.disabled=!1,focus:()=>e.focus(),blur:()=>e.blur(),setTime:r=>e.value=r,getTime:()=>e.value,setMinimumTime:r=>e.min=r,setMaximumTime:r=>e.max=r,element:e}}static JSONProcess(e){return e.value?e.value:""}};var M=class{static shouldProcess(e){return!0}static process(e){return{disable:()=>e.disabled=!0,enable:()=>e.disabled=!1,focus:()=>e.focus(),blur:()=>e.blur(),getSelected:()=>e.value,element:e}}static JSONProcess(e){return e.value?e.value:""}};var P=class{#e;constructor(e){e==null&&(e=this.#r()),this.#e=e}#r(){let e=new k;return e.addHandler(HTMLInputElement,'input[type="text"], input[type="password"], input[type="email"], input[type="hidden"], input[type="tel"], div',f),e.addHandler(HTMLInputElement,'input[type="checkbox"]',p),e.addHandler(HTMLInputElement,'input[type="color"]',b),e.addHandler(HTMLInputElement,'input[type="date"]',l),e.addHandler(HTMLInputElement,'input[type="datetime-local"]',y),e.addHandler(HTMLInputElement,'input[type="file"]',g),e.addHandler(HTMLInputElement,'input[type="number"]',v),e.addHandler(HTMLInputElement,'input[type="radio"]',x),e.addHandler(HTMLInputElement,'input[type="range"]',S),e.addHandler(HTMLInputElement,'input[type="time"]',H),e.addHandler(HTMLSelectElement,"select",M),e}search(e,r=!1){typeof e=="string"&&(e=document.getElementById(e));let s={},u=e.querySelectorAll("*");console.log(u);for(let a of u){let d=this.#e.findHandlerFor(a),t;!d&&!r?t=a:d&&(t=d.process(a)),t&&(s[a.id]?(Array.isArray(s[a.id])||(s[a.id]=[s[a.id]]),s[a.id].push(t)):s[a.id]=t)}return s}json(e){typeof e=="string"&&(e=document.getElementById(e));let r={},s=e.querySelectorAll(this.#e.getQuerySelector());console.log(s);for(let u of s){let a=this.#e.findHandlerFor(u);if(!a)continue;let d=a?.JSONProcess(u);if(d==null)continue;let t=u?.id||u?.name||this.#s;a?.customKey&&(t=a?.customKey(u));let n=u.parentElement,w=[];for(;n&&n!==e;){let c=n.id||n.name||this.#s;w.unshift(c),n=n.parentElement}let o=r;for(let c of w)o[c]?typeof o[c]!="object"&&(o[c]={value:o[c]}):o[c]={},o=o[c];o[t]?(Array.isArray(o[t])||(o[t]=[o[t]]),o[t].push(d)):o[t]=d}return r}#s(){return`no_name_${Math.random().toString(36).slice(2)}`}};export{k as HandlerList,P as default};
